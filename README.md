# Multithreaded HTTP proxy (no cache)

многопоточный HTTP proxy сервер (задание 3.2).  
Поддерживает семантику HTTP/1.0, не кэширует ответы.  
Каждое клиентское соединение обрабатывается в отдельном отсоединенном потоке.

## Возможности

- Слушает TCP порт (по умолчанию 80, можно задать аргументом).
- Принимает HTTP запрос от клиента и перенаправляет его на origin сервер.
- Поддерживается метод GET, остальные пробрасываются как есть (без гарантий).
- Клиент может говорить HTTP/1.1, но к origin прокси ходит как HTTP/1.0.
- Прокси всегда просит origin закрыть соединение (Connection: close).
- Нет кэша, cookies, авторизации и HTTPS.

## Сборка

make

## Запуск

sudo ./build/proxy-http
или прост sudo make run

./build/proxy-http 8080 # для порта определенного

## примеры запросов
curl -v -x 127.0.0.1:8080 http://example.com/
curl -v -x 127.0.0.1:8080 http://gramota.ru/

## Краткая архитектура

В main:

создается слушающий TCP сокет (socket + bind + listen);

порт можно задать аргументом командной строки;

настраиваются атрибуты потока с PTHREAD_CREATE_DETACHED;

в цикле accept принимаются соединения, под каждое создается поток handle_connection.

В handle_connection:

HTTP заголовки читаются в цикле до \r\n\r\n или переполнения буфера;

парсится первая строка и заголовок Host;

запрос нормализуется до HTTP/1.0 и устанавливается Connection: close;

имя хоста резолвится через getaddrinfo;

выбирается первый успешный адрес, устанавливается TCP соединение с origin;

запрос отправляется на origin, ответ читается и транзитом пересылается клиенту.

Логи запросов и ошибок пишутся на stdout/stderr для демонстрации работы.
